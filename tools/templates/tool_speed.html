{% extends 'base/base_registered.html' %}
{% load static %}
{% load i18n %}

<!--ESto é para que aparezan os puntos nos datos dos países e os números sexan máis visibles-->
{% load humanize %}

{% block content %}
<style>
    #grouping_card {
        background: none; /* Remove background */
        border: none; 
    }
</style>

<h2 class="mt-3 text-center">{% trans "Speed Tool" %}</h2>
<div id="background_graphs" class="row text-center" style="color: green;">
    <h2>{{groupset_brand_value_html}}</h2>
    <h2>{{groupset_model_value_html}}</h2>
    <h2>{{speed_km_h_html}} km/h</h2>
    <h2>{{force_back_wheel_html}} {{total_forces_back_wheel_html}} {{total_forces_back_wheel_3_html}} Newtons Forza roda traseira</h2>
    <h2>{{force_slope_html}} Newtons Forza necesaria para subir a costa</h2>
    <h2>{{pendiente_por_cada_cassette_html}} Pendiente máxima que pode subir</h2>
</div>
       
<main>
    <div class="container-fluid px-4">
        <h1 class="mt-4">Dashboard</h1>
        <ol class="breadcrumb mb-4">
            <li class="breadcrumb-item active">Cassette 1</li>
        </ol>
        <form class="mx-1 mx-md-4" method="POST" action="" novalidate>
        {% csrf_token %}
            <div class="row">
                <div class="col-xl-2 col-md-6">
                    <div class="card bg-primary text-white mb-4">
                        <div class="card-body">What kind of cyclist are you?</div>
                        <div class="card-footer d-flex align-items-center justify-content-between">
                            {{ wattios_input_html.wattios }}
                        </div>
                    </div>
                </div>
                <div class="col-xl-2 col-md-6">
                    <div class="card bg-warning text-white mb-4">
                        <div class="card-body">Your weight</div>
                        <div class="card-footer d-flex align-items-center justify-content-between">
                            {{ weight_input_html.weight }}
                        </div>
                    </div>
                </div>
                <div class="col-xl-2 col-md-6">
                    <div class="card bg-warning text-white mb-4">
                        <div class="card-body">Group Brand Name</div>
                        <div class="card-footer d-flex align-items-center justify-content-between">
                            {{ groupset_brand_input_html.groupset_brand }}
                        </div>
                    </div>
                </div>
                <div class="col-xl-2 col-md-6">
                    <div class="card bg-warning text-white mb-4">
                        <div class="card-body">Group Model</div>
                        <div class="card-footer d-flex align-items-center justify-content-between">
                            {{ groupset_model_input_html.groupset_model }}
                        </div>
                    </div>
                </div>
                <div class="col-xl-2 col-md-6">
                    <div class="card bg-success text-white mb-4">
                        <div class="card-body">Teeth of your chainring
                            {{ teeth_chainring_input_html.teeth_chainring }}
                        </div>
                    </div>
                </div>
                <div class="col-xl-2 col-md-6">
                    <div class="card bg-danger text-white mb-4">
                        <div class="card-body">Teeth of your cassette</div>
                        <div class="card-footer d-flex align-items-center justify-content-between">
                            {{ teeth_cassette_input_html.teeth_cassette }}
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <button id="update_personal_data_button" type="submit" class="btn btn-success btn-lg" id="deliveryNextBtn">Calculate</button>
            </div>
        </form>

        <div style="display: flex;">
            <div id="1_design_chainring" style="display: flex; align-items: center; margin-left: 50px;" class="mb-3">
                <div style="border-left: 10px solid blue; height: 150px; margin-left: 10px;"> </div> 
            </div>
            
            <div id="2_design_chainring" style="display: flex; align-items: center; margin-left: 50px;" class="mb-3">
                <div style="border-left: 10px solid blue; height: 150px; margin-left: 10px;"> </div> 
                <div style="border-left: 10px solid green; height: 300px; margin-left: 10px;"> </div> 
            </div>
            
            <div id="3_design_chainring" style="display: flex; align-items: center; margin-left: 50px" class="mb-3">
                <div style="border-left: 10px solid red; height: 75px;"> </div>
                <div style="border-left: 10px solid blue; height: 150px; margin-left: 10px;"> </div> 
                <div style="border-left: 10px solid green; height: 300px; margin-left: 10px;"> </div> 
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header">
                <i class="fas fa-table me-1"></i>
                DataTable Example
            </div>
            <div class="card-body">
                <table id="datatablesSimple">
                    
                </table>
            </div>
        </div>
    </div>
<label>
    <ul id="ul_notes_tool">Assupmtions for the slope percent calculation:
        <li id="li_notes_tool">Climbing constant speed: 3.6 km/h</li>
        <li id="li_notes_tool">Surface: asphalt (there is always grip)</li>
        <li id="li_notes_tool">Ignoring resistance forces in the pedal, chain, bearings, wind... Considering only rolling force</li>
        <li id="li_notes_tool">Bike weight: 13 kg</li>
        <li id="li_notes_tool">Diameter of the wheels: 700mm</li>
        <li id="li_notes_tool">Wattios/kg measured for 5min:
            <ul>
                <li>Exceptional: 6.2 W/kg</li>
                <li>Excelent: 5.6 W/kg</li>
                <li>Very good: 5 W/kg</li>
                <li>Good: 4.3 W/kg</li>
                <li>Moderate 3.7 W/kg</li>
                <li>Novice: 1.7 W/kg</li>
            </ul>
        </li>
    </ul>
    <ul id="ul_notes_tool">Assupmtions for maximun speed:
        <li id="li_notes_tool">Crankarm: 165mm</li>
        <li id="li_notes_tool">Revolutions per minute: 130 rpm</li>
    </ul>
</label>
</main>

<!-- Include jQuery from CDN -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
    jQuery(document).ready(function () {
        // Function to update weight choices based on the selected wattios value
        function updateWeightChoices() {
            var selectedWattios = jQuery('#id_wattios_form').val();
            var weightSelect = jQuery('#id_weight_form');
            var newWeightChoices = [];

            if (selectedWattios === '6.2') {
                newWeightChoices = [
                    { value: 60, text: '60' },
                    { value: 65, text: '65' },
                    { value: 70, text: '70' },
                    { value: 75, text: '75' },
                    { value: 80, text: '80' },
                    { value: 85, text: '85' },
                ];
            } else if (selectedWattios === '5.6' ||  selectedWattios === '5') {
                newWeightChoices = [
                    { value: 60, text: '60' },
                    { value: 65, text: '65' },
                    { value: 70, text: '70' },
                    { value: 75, text: '75' },
                    { value: 80, text: '80' },
                    { value: 85, text: '85' },
                    { value: 90, text: '90' },
                ];
            } else if (selectedWattios === '4.3' || selectedWattios === '3.7' ) {
                newWeightChoices = [
                    { value: 50, text: '50' },
                    { value: 55, text: '55' },
                    { value: 60, text: '60' },
                    { value: 65, text: '65' },
                    { value: 70, text: '70' },
                    { value: 75, text: '75' },
                    { value: 80, text: '80' },
                    { value: 85, text: '85' },
                    { value: 90, text: '90' },
                    { value: 95, text: '95' },
                    { value: 100, text: '100' },
                ];
            } else if (selectedWattios === '1.7') {
                newWeightChoices = [
                    { value: 45, text: '45' },
                    { value: 50, text: '50' },
                    { value: 55, text: '55' },
                    { value: 60, text: '60' },
                    { value: 65, text: '65' },
                    { value: 70, text: '70' },
                    { value: 75, text: '75' },
                    { value: 80, text: '80' },
                    { value: 85, text: '85' },
                    { value: 90, text: '90' },
                    { value: 95, text: '95' },
                    { value: 105, text: '105' },
                    { value: 110, text: '110' },
                    { value: 115, text: '115' },
                    { value: 120, text: '120' },
                    { value: 125, text: '125' },
                    { value: 130, text: '130' },
                    { value: 135, text: '135' },
                    { value: 140, text: '140' },
                    { value: 145, text: '145' }
                ];
            }
            // Clear existing options and add new options
            weightSelect.empty();
            jQuery.each(newWeightChoices, function (index, item) {
                weightSelect.append(jQuery('<option>', {
                    value: item.value,
                    text: item.text
                }));
            });
        }

        // Esto é para cando a páxina se carga por primeira vez, aparezcan os pesos ben en función do tipo de ciclista que está seleccionado ao cargar a páxina por primeira vez.
        updateWeightChoices();

        // Attach the update function to the change event of the wattios dropdown
        jQuery('#id_wattios_form').change(updateWeightChoices);
    });
</script>

<!--This script connecs the groupset brand name with the group model name. Therefore if user selects Campagnolo, only groups from Campagnolo are showed up-->
<script>
    jQuery(document).ready(function () {
        function update_groupset_choices() {
            var select_groupset_brand = jQuery('#id_groupset_brand_form').val();
            var select_groupset_model = jQuery('#id_groupset_model_form');
            var new_groupset_choices = [];

            // Clear existing options
            select_groupset_model.empty();

            if (select_groupset_brand === 'Campagnolo') {
                new_groupset_choices = [
                    { value: 'Ekar', text: 'Ekar' },
                    { value: 'Super Record Wireless (electronic)', text: 'Super Record Wireless (electronic)' },
                    { value: 'Super Record', text: 'Super Record' },
                    { value: 'Record', text: 'Record' },
                    { value: 'Chorus', text: 'Chorus' },
                ];
            } else if (select_groupset_brand === 'Shimano') {
                new_groupset_choices = [
                    { value: 'GRX', text: 'GRX' },
                    { value: 'Dura-Ace (electronic)', text: 'Dura-Ace (electronic)' },
                    { value: 'Ultegra (electronic)', text: 'Ultegra (electronic)' },
                    { value: 'Shimano 105', text: 'Shimano 105' },
                    { value: 'Tiagra', text: 'Tiagra' },
                    { value: 'Sora', text: 'Sora' },
                    { value: 'Claris', text: 'Claris' },
                    { value: 'XTR (electronic)', text: 'XTR (electronic)'},
                    { value: 'XTR', text: 'XTR'},
                    { value: 'Deore XT (electronic)', text: 'Deore XT (electronic)'},
                    { value: 'Deore', text: 'Deore'},
                    { value: 'SLX', text: 'SLX'},
                    { value: 'Cues', text: 'Cues'},
                    { value: 'Alivio', text: 'Alivio'},
                    { value: 'Acera', text: 'Acera'},
                    { value: 'Altus', text: 'Altus'},
                ];
            } else if (select_groupset_brand === 'Sram' ) {
                new_groupset_choices = [
                    { value: 'Force eTap AXS (electronic)', text:'Force eTap AXS (electronic)'},
                    { value: 'Force', text:'Force'},
                    { value: 'Rival Etap AXS (electronic)', text:'Rival Etap AXS (electronic)'},
                    { value: 'Rival', text:'Rival'},
                    { value: 'Apex', text:'Apex'},
                    { value: 'Red eTap AXS (electronic)', text: 'Red eTap AXS (electronic)'},
                    { value: 'XX1 Eagle AXS (electronic)', text: 'XX1 Eagle AXS (electronic)' },
                    { value: 'XX1 Eagle', text: 'XX1 Eagle' },
                    { value: 'X01 Eagle AXS (electronic)', text: 'X01 Eagle AXS (electronic)' },
                    { value: 'X01 Eagle', text: 'X01 Eagle' },
                    { value: 'GX Eagle AXS (electronic)', text: 'GX Eagle AXS (electronic)' },
                    { value: 'GX Eagle', text: 'GX Eagle' },
                    { value: 'NX Eagle', text: 'NX Eagle' },
                    { value: 'SX Eagle', text: 'SX Eagle' },
                ];
            } else if (select_groupset_brand === 'Microshift') {
                new_groupset_choices = [
                    { value: 'Sword', text: 'Sword' },
                    { value: 'Advent X', text: 'Advent X' },
                    { value: 'Advent', text: 'Advent' },
                    { value: 'Acolyte', text: 'Acolyte' },
                ];
            } else if (select_groupset_brand === 'State') {
                new_groupset_choices = [
                    { value: 'All Road', text: 'All Road' },
                ];
            }
            // Clear existing options and add new options
            select_groupset_model.empty();
            jQuery.each(new_groupset_choices, function (index, item) {
                select_groupset_model.append(jQuery('<option>', {
                    value: item.value,
                    text: item.text
                }));
            });
        }
        // Esto é para cando a páxina se carga por primeira vez, aparezca os modelos xa ben en función do que hai na mara do grupo (Group Brand Name)
        update_groupset_choices();

        // Attach the update function to the change event of the gropset model dropdown
        jQuery('#id_groupset_brand_form').change(update_groupset_choices);
    });
</script>

<!-- Actualizar os dropdowns do chainring en fución do modelo de group set que se seleccione-->
<script>
    jQuery(document).ready(function () {
        function update_dropdown_chainring_choices() {
            var selected_model_groupset = jQuery('#id_groupset_model_form').val(); 
            var teeth_chainring = jQuery('#id_teeth_chainring_form');
            var new_teeth_choices = [];

            if (selected_model_groupset === 'Ekar') {
                new_teeth_choices = [
                    { value: '38', text: '38T' },
                    { value: '40', text: '40T' },
                    { value: '42', text: '42T' },
                    { value: '44', text: '44T' }
                ];
            }
            else if (selected_model_groupset === 'GRX') {
                new_teeth_choices = [
                    { value: '40', text: '40T' },
                    { value: '42', text: '42T' },
                    { value: '46-30', text: '46T-30T' },
                    { value: '48-31', text: '48T-31T' },
                ];
            }
            else if (selected_model_groupset === 'Apex') {
                new_teeth_choices = [
                    { value: '40', text: '40T' },
                    { value: '42', text: '42T' },
                ];
            }
            else if (selected_model_groupset === 'Force eTap AXS (electronic)' || selected_model_groupset === 'Force') {
                new_teeth_choices = [
                    { value: '40', text: '40T' },
                    { value: '43-30', text: '43T-30T' },
                    { value: '46-33', text: '46T-33T' },
                    { value: '48-35', text: '48T-35T' },
                    { value: '50-37', text: '50T-37T' },
                ];
            }
            else if (selected_model_groupset === 'Rival Etap AXS (electronic)' || selected_model_groupset === 'Rival') {
                new_teeth_choices = [
                    { value: '33', text: '33T' },
                    { value: '35', text: '35T' },
                    { value: '38', text: '38T' },
                    { value: '40', text: '40T' },
                    { value: '42', text: '42T' },
                    { value: '43', text: '43T' },
                    { value: '44', text: '44T' },
                    { value: '46', text: '46T' },
                    { value: '48', text: '48T' },
                    { value: '43-30', text: '43T-30T' },
                    { value: '46-33', text: '46T-33T' },
                    { value: '48-35', text: '48T-35T' },
                    { value: '50-37', text: '50T-37T' },
                ];
            }
            else if (selected_model_groupset === 'All Road') {
                new_teeth_choices = [
                    { value: '42', text: '42T' },
                ];
            }
            else if (selected_model_groupset === 'Chorus') {
                new_teeth_choices = [
                    { value: '48-32', text: '48T-32T' },
                    { value: '50-34', text: '50T-34T' },
                    { value: '52-36', text: '52T-36T' },
                ];
            }
            else if (selected_model_groupset === 'Super Record Wireless (electronic)') {
                new_teeth_choices = [
                    { value: '45-29', text: '45T-29T' },
                    { value: '48-32', text: '48T-32T' },
                    { value: '50-34', text: '50T-34T' },
                ];
            }
            else if (selected_model_groupset === 'Super Record' || selected_model_groupset === 'Record') {
                new_teeth_choices = [
                    { value: '50-34', text: '50T-34T' },
                    { value: '52-36', text: '52T-36T' },
                    { value: '53-39', text: '53T-39T' },
                ];
            }
            else if (selected_model_groupset === 'Tiagra' || selected_model_groupset === 'Sora') {
                new_teeth_choices = [
                    { value: '48-34', text: '48T-34T' },
                    { value: '50-34', text: '50T-34T' },
                    { value: '52-36', text: '52T-36T' },
                    { value: '59-39-30', text: '59-39-30T' },
                ];
            }
            else if (selected_model_groupset === 'Claris') {
                new_teeth_choices = [
                    { value: '46-34', text: '46T-34T' },
                    { value: '50-34', text: '50T-34T' },
                    { value: '59-39-30', text: '59-39-30T' },
                ];
            }
            else if (selected_model_groupset === 'Shimano 105 (electronic)' || selected_model_groupset === 'Shimano 105') {
                new_teeth_choices = [
                    { value: '50-34', text: '50T-34T' },
                    { value: '52-36', text: '52T-36T' },
                ];
            }
            else if (selected_model_groupset === 'Dura-Ace (electronic)') {
                new_teeth_choices = [
                    { value: '46-36', text: '46T-36T' },
                    { value: '50-34', text: '50T-34T' },
                    { value: '52-36', text: '52T-36T' },
                    { value: '54-40', text: '54T-40T' },
                ];
            }
            else if (selected_model_groupset === 'Ultegra (electronic)') {
                new_teeth_choices = [
                    { value: '46-36', text: '46T-36T' },
                    { value: '50-34', text: '50T-34T' },
                    { value: '52-36', text: '52T-36T' },
                ];
            }
            else if (selected_model_groupset === 'Red eTap AXS (electronic)') {
                new_teeth_choices = [
                    { value: '46-33', text: '46T-33T' },
                    { value: '48-35', text: '48T-35T' },
                    { value: '50-37', text: '50T-37T' },
                    { value: '52-39', text: '52T-39T' },
                    { value: '54-41', text: '54T-41T' },
                    { value: '56-43', text: '56T-43T' },
                ];
            }
            else if (selected_model_groupset === 'Alivio' || selected_model_groupset === 'Acera') {
                new_teeth_choices = [
                    { value: '36-22', text: '36T-22T' },
                    { value: '46-30', text: '46T-30T' },
                    { value: '40-30-22', text: '40-30-22T' },
                    { value: '44-32-22', text: '44-32-22T' },
                ];
            }
            else if (selected_model_groupset === 'Altus') {
                new_teeth_choices = [
                    { value: '40-30-22', text: '40-30-22T' },
                    { value: '44-32-22', text: '44-32-22T' },
                ];
            }
            else if (selected_model_groupset === 'Deore' || selected_model_groupset === 'SLX') {
                new_teeth_choices = [
                    { value: '30', text: '30T' },
                    { value: '32', text: '32T' },
                    { value: '34', text: '34T' },
                    { value: '36-26', text: '36T-26T' },
                ];
            }
            else if (selected_model_groupset === 'Cues') {
                new_teeth_choices = [
                    { value: '30', text: '30T' },
                    { value: '32', text: '32T' },
                    { value: '40', text: '40T' },
                    { value: '42', text: '42T' },
                    { value: '36-22', text: '36T-22T' },
                    { value: '46-30', text: '46T-30T' },
                    { value: '46-32', text: '46T-32T' },
                ];
            }
            else if (selected_model_groupset === 'XTR (electronic)' || selected_model_groupset === 'XTR') {
                new_teeth_choices = [
                    { value: '30', text: '30T' },
                    { value: '32', text: '32T' },
                    { value: '34', text: '34T' },
                    { value: '36', text: '36T' },
                    { value: '38', text: '38T' },
                    { value: '38-28', text: '38T-28T' },
                ];
            }
            else if (selected_model_groupset === 'Deore XT (electronic)' || selected_model_groupset === 'Deore XT') {
                new_teeth_choices = [
                    { value: '28', text: '28T' },
                    { value: '30', text: '30T' },
                    { value: '32', text: '32T' },
                    { value: '34', text: '34T' },
                    { value: '36', text: '36T' },
                    { value: '36-26', text: '36T-26T' },
                ];
            }
            else if (selected_model_groupset === 'SX Eagle') {
                new_teeth_choices = [
                    { value: '30', text: '30T' },
                    { value: '32', text: '32T' },
                    { value: '34', text: '34T' },
                ];
            }
            else if (selected_model_groupset === 'GX Eagle AXS (electronic)' || selected_model_groupset === 'GX Eagle' || selected_model_groupset === 'NX Eagle') {
                new_teeth_choices = [
                    { value: '30', text: '30T' },
                    { value: '32', text: '32T' },
                    { value: '34', text: '34T' },
                ];
            }
            else if (selected_model_groupset === 'XX1 Eagle AXS (electronic)') {
                new_teeth_choices = [
                    { value: '30', text: '30T' },
                    { value: '32', text: '32T' },
                    { value: '34', text: '34T' },
                    { value: '36', text: '36T' },
                    { value: '38', text: '38T' },
                ];
            }
            else if (selected_model_groupset === 'XX1 Eagle') {
                new_teeth_choices = [
                    { value: '30', text: '30T' },
                    { value: '32', text: '32T' },
                    { value: '34', text: '34T' },
                    { value: '36', text: '36T' },
                ];
            }
            else if (selected_model_groupset === 'X01 Eagle AXS (electronic)') {
                new_teeth_choices = [
                    { value: '32', text: '32T' },
                ];
            }
            else if (selected_model_groupset === 'X01 Eagle') {
                new_teeth_choices = [
                    { value: '30', text: '30T' },
                    { value: '32', text: '32T' },
                ];
            }
            else if (selected_model_groupset === 'Sword') {
                new_teeth_choices = [
                    { value: '40', text: '40T' },
                    { value: '42', text: '42T' },
                    { value: '46-29', text: '46T-29T' },
                    { value: '48-31', text: '48T-31T' },
                ];
            }
            else if (selected_model_groupset === 'Advent' || selected_model_groupset === 'Acolyte' || selected_model_groupset === 'Advent X') {
                new_teeth_choices = [
                    { value: '30', text: '30T' },
                    { value: '32', text: '32T' },
                    { value: '34', text: '34T' },
                ];
            }
            else if (selected_model_groupset === 'All Road') {
                new_teeth_choices = [
                    { value: '42', text: '42T' },
                ];
            }
            
            // Clear existing options and add new options
            teeth_chainring.empty();
            jQuery.each(new_teeth_choices, function (index, item) {
                teeth_chainring.append(jQuery('<option>', {
                    value: item.value,
                    text: item.text
                }));
            });
        }
        

        //Esto é para que cando exista un cambio do groupset_model_form ou no groupset_brand_form, o formulario do chairing se actualice.
        jQuery('#id_groupset_model_form').change(update_dropdown_chainring_choices);
        jQuery('#id_groupset_brand_form').change(update_dropdown_chainring_choices);

        //Con esto fai que cando se carga a páxina por primeira vez, mostre xa ben os valores do "Teeth of your chainring" dependendo do modelo que está seleccionado.
        update_dropdown_chainring_choices()
    });
</script>

<!--Que aparezcan os cassettes correspondentes dependendo do modelo que se escolla de cambio -->
<script>
    jQuery(document).ready(function () {
        function update_cassette_choices() {
            var select_groupset_model = jQuery('#id_groupset_model_form').val();
            var cassete_teeth = jQuery('#id_teeth_cassette'); 
            var new_cassette_choices = [];

            if (select_groupset_model === 'Ekar') {
                new_cassette_choices = [
                    { value: '9-10-11-12-13-14-16-18-20-23-27-31-36', text: '9T-36T - 13 speeds' },
                    { value: '9-10-11-12-13-14-16-18-21-25-30-36-42', text: '9T-42T - 13 speeds' },
                    { value: '10-11-12-13-14-15-17-20-23-27-32-38-44', text: '10T-44T - 13 speeds'},
                ];
            } else if (select_groupset_model === 'GRX') {
                new_cassette_choices = [
                    { value: '11-12-13-14-15-17-19-21-23-25', text: '11T-25T - 10 speeds' },
                    { value: '11-12-14-16-18-20-22-25-28-32', text: '11T-32T - 10 speeds' },
                    { value: '12-13-14-15-17-19-21-23-25-28', text: '12T-28T - 10 speeds' },
                    { value: '11-13-15-17-19-21-23-26-30-34', text: '11T-34T - 10 speeds' },
                    { value: '11-13-15-17-19-21-24-28-32-36', text: '11T-36T - 10 speeds' },
                    { value: '11-12-13-14-15-16-17-19-21-23-25', text: '11T-25T - 11 speeds' },
                    { value: '11-12-13-14-15-17-19-21-23-25-28', text: '11T-28T - 11 speeds' },
                    { value: '11-12-13-14-15-17-19-21-24-27-30', text: '11T-30T - 11 speeds'},
                    { value: '11-12-13-14-16-18-20-22-25-28-32', text: '11T-32T - 11 speeds'},
                    { value: '11-13-15-17-19-21-23-25-27-30-34', text: '11T-34T - 11 speeds'},
                    { value: '11-13-15-17-19-21-24-27-31-35-40', text: '11T-40T - 11 speeds'},
                    { value: '11-13-15-17-19-21-24-28-32-37-42', text: '11T-42T - 11 speeds'},
                    { value: '11-13-15-17-19-21-24-28-32-37-46', text: '11T-46T - 11 speeds'},
                    { value: '12-13-14-15-16-17-18-19-21-23-25', text: '12T-25T - 11 speeds'},
                    { value: '14-15-16-17-18-19-20-21-23-25-28', text: '14T-28T - 11 speeds'},
                    { value: '10-12-14-16-18-21-24-28-32-36-40-45', text: '10T-45T - 12 speeds'},
                    { value: '10-12-14-16-18-21-24-28-33-39-45-51', text: '10T-51T - 12 speeds'},
                    { value: '11-12-13-14-15-16-17-19-21-24-27-30', text: '11T-30T - 12 speeds'},
                    { value: '11-12-13-14-15-17-19-21-24-27-30-34', text: '11T-34T - 12 speeds_'},
                ];
            } else if (select_groupset_model === 'Apex' ) {
                new_cassette_choices = [
                    { value: '11-12-13-15-17-19-21-24-28-32-38-44', text:'11T-44T - 12 speeds'},
                ];
            } else if (select_groupset_model === 'Force eTap AXS (electronic)' || select_groupset_model === 'Force') {
                new_cassette_choices = [
                    { value: '10-11-12-13-14-15-16-17-19-21-24-28', text:'10T-28T - 12 speeds'},
                    { value: '10-11-12-13-14-15-17-19-21-24-27-30', text:'10T-30T - 12 speeds'},
                    { value: '10-11-12-13-14-15-17-19-21-24-28-33', text:'10T-33T - 12 speeds'},
                    { value: '10-11-12-13-15-17-19-21-24-28-32-36', text:'10T-36T - 12 speeds'},
                    { value: '10-11-13-15-17-19-21-24-28-32-38-44', text:'10T-44T - 12 speeds'},
                ];
            } else if (select_groupset_model === 'Rival Etap AXS (electronic)' || select_groupset_model === 'Rival') {
                new_cassette_choices = [
                    { value: '10-11-12-13-14-15-17-19-21-24-27-30', text: '10T-30T - 12 speeds' },
                    { value: '10-11-12-13-15-17-19-21-24-28-32-36', text: '10T-36T - 12 speeds' },
                    { value: '10-11-13-15-17-19-21-24-28-32-38-44', text: '10T-44T - 12 speeds' },
                ];
            } else if (select_groupset_model === 'Sword') {
                new_cassette_choices = [
                    { value: '11-13-15-17-19-21-24-28-32-38', text: '11T-38T - 10 speeds' },
                    { value: '11-13-15-18-21-24-28-34-40-48', text: '11T-48T - 10 speeds' },
                ];
            } else if (select_groupset_model === 'All Road') {
                new_cassette_choices = [
                    { value: '11-13-15-17-19-21-24-28-32-36-42', text: '11T-42T - 11 speeds_' },
                ];
            } else if (select_groupset_model === 'Chorus' || select_groupset_model === 'Super Record' || select_groupset_model === 'Record') {
                new_cassette_choices = [
                    { value: '11-12-13-14-15-16-17-19-21-23-26-29', text: '11T-29T - 12 speeds' },
                    { value: '11-12-13-14-15-16-17-19-22-25-28-32', text: '11T-32T - 12 speeds' },
                    { value: '11-12-13-14-15-16-17-19-22-25-29-34', text: '11T-34T - 12 speeds' },
                ];
            } else if (select_groupset_model === 'Super Record Wireless (electronic)') {
                new_cassette_choices = [
                    { value: '10-11-12-13-14-15-16-17-19-21-23-25', text: '10T-25T - 12 speeds' },
                    { value: '10-11-12-13-14-15-16-17-19-21-24-27', text: '10T-27T - 12 speeds' },
                    { value: '10-11-12-13-14-15-16-18-20-23-26-29', text: '10T-29T - 12 speeds' },
                ];
            } else if (select_groupset_model === 'Tiagra') {
                new_cassette_choices = [
                    { value: '11-12-13-14-15-17-19-21-23-25', text: '11T-25T - 10 speeds' },
                    { value: '11-12-14-16-18-20-22-25-28-32', text: '11T-32T - 10 speeds' },
                    { value: '11-13-15-17-19-21-23-26-30-34', text: '11T-34T - 10 speeds' },
                    { value: '12-13-14-15-17-19-21-23-25-28', text: '12T-28T - 10 speeds' },
                ];
            } else if (select_groupset_model === 'Sora') {
                new_cassette_choices = [
                    { value: '11-12-14-16-18-20-23-26-30', text: '11T-30T - 9 speeds' },
                    { value: '12-13-14-15-17-19-21-23-25', text: '12T-25T - 9 speeds' },
                    { value: '13-14-15-16-17-19-21-23-25', text: '13T-25T - 9 speeds' },
                    { value: '14-15-16-17-18-19-21-23-25', text: '14T-25T - 9 speeds' },
                ];
            } else if (select_groupset_model === 'Claris') {
                new_cassette_choices = [
                    { value: '11-13-15-17-19-21-24-28', text: '11T-28T - 8 speeds' },
                    { value: '11-13-15-17-20-23-26-30', text: '11T-30T - 8 speeds' },
                    { value: '11-13-15-18-21-24-28-32', text: '11T-32T - 8 speeds' },
                    { value: '11-13-15-18-21-24-28-34', text: '11T-34T - 8 speeds' },
                    { value: '12-13-14-15-17-19-21-23', text: '12T-23T - 8 speeds' },
                    { value: '12-13-15-17-19-21-23-25', text: '12T-25T - 8 speeds' },
                    { value: '13-14-15-17-19-21-23-26', text: '13T-26T - 8 speeds' },
                ];
            } else if (select_groupset_model === 'Shimano 105 (electronic)' || select_groupset_model === 'Shimano 105') {
                new_cassette_choices = [
                    { value: '11-12-13-14-15-17-19-21-24-27-30-34', text: '11T-34T - 12 speeds_' },
                    { value: '11-12-13-14-15-17-19-21-24-28-32-36', text: '11T-36T - 12 speeds' },
                ];
            } else if (select_groupset_model === 'Dura-Ace (electronic)' || select_groupset_model === 'Ultegra (electronic)') {
                new_cassette_choices = [
                    { value: '11-12-13-14-15-16-17-19-21-24-27-30', text: '11T-30T - 12 speeds' },
                    { value: '11-12-13-14-15-17-19-21-24-27-30-34', text: '11T-34T - 12 speeds_' },
                ];
            } else if (select_groupset_model === 'Red eTap AXS (electronic)') {
                new_cassette_choices = [
                    { value: '10-11-12-13-14-15-16-17-19-21-23-26', text: '10T-26T - 12 speeds' },
                    { value: '10-11-12-13-14-15-16-17-19-21-24-28', text: '10T-28T - 12 speeds' },
                    { value: '10-11-12-13-14-15-17-19-21-24-28-33', text: '10T-33T - 12 speeds' },
                    { value: '10-11-13-15-17-19-21-24-28-32-38-44', text: '10T-44T - 12 speeds' },
                ];
            } else if (select_groupset_model === 'Alivio' || select_groupset_model === 'Acera' || select_groupset_model === 'Altus') {
                new_cassette_choices = [
                    { value: '11-12-13-15-17-19-21-23-25', text: '11T-25T - 9 speeds' },
                    { value: '11-13-15-17-19-21-24-28-32', text: '11T-32T - 9 speeds' },
                    { value: '11-13-15-17-20-23-26-30-34', text: '11T-34T - 9 speeds' },
                    { value: '11-13-15-17-20-23-26-30-36', text: '11T-36T - 9 speeds' },
                ];
            } else if (select_groupset_model === 'Deore') {
                new_cassette_choices = [
                    { value: '11-13-15-17-19-21-24-28-32-36', text: '11T-36T - 10 speeds' },
                    { value: '11-13-15-18-21-24-28-32-37-42', text: '11T-42T - 10 speeds' },
                    { value: '11-13-15-17-20-23-26-30-36-43', text: '11T-43T - 10 speeds' },
                    { value: '11-13-15-17-19-21-24-28-32-37-42', text: '11T-42T - 11 speeds' },
                    { value: '11-13-15-18-21-24-28-33-39-45-51', text: '11T-51T - 11 speeds' },
                    { value: '10-12-14-16-18-21-24-28-33-39-45-51', text: '10T-51T - 12 speeds' },
                ];
            } else if (select_groupset_model === 'SLX' || select_groupset_model === 'XTR (electronic)' || select_groupset_model === 'XTR') {
                new_cassette_choices = [
                    { value: '10-12-14-16-18-21-24-28-32-36-40-45', text: '10T-45T - 12 speeds' },
                    { value: '10-12-14-16-18-21-24-28-33-39-45-51', text: '10T-51T - 12 speeds' },
                ];
            } else if (select_groupset_model === 'Cues') {
                new_cassette_choices = [
                    { value: '11-13-15-17-20-23-26-30-34-39-45', text: '11T-45T - 11 speeds' },
                    { value: '11-13-15-17-20-23-26-30-36-43-50', text: '11T-50T - 11 speeds' },
                ];
            } else if (select_groupset_model === 'Deore XT (electronic)' || select_groupset_model === 'Deore XT') {
                new_cassette_choices = [
                    { value: '11-13-15-17-20-23-26-30-36-43-50', text: '11T-50T - 11 speeds' },
                    { value: '10-12-14-16-18-21-24-28-32-36-40-45', text: '10T-45T - 12 speeds' },
                    { value: '10-12-14-16-18-21-24-28-33-39-45-51', text: '10T-51T - 12 speeds' }
                ];
            } else if (select_groupset_model === 'SX Eagle' || select_groupset_model === 'NX Eagle') {
                new_cassette_choices = [
                    { value: '11-13-15-17-19-22-25-28-32-36-42-50', text: '11T-50T - 12 speeds' },
                ];
            } else if (select_groupset_model === 'GX Eagle AXS (electronic)' || select_groupset_model === 'GX Eagle' || select_groupset_model === 'XX1 Eagle' || select_groupset_model === 'X01 Eagle') {
                new_cassette_choices = [
                    { value: '10-12-14-16-18-21-24-28-32-36-42-52', text: '10T-52T - 12 speeds' },
                ];
            } else if (select_groupset_model === 'XX1 Eagle AXS (electronic)') {
                new_cassette_choices = [
                    { value: '10-12-14-16-18-21-24-28-32-36-42-50', text: '10T-50T - 12 speeds' },
                ];
            } else if (select_groupset_model === 'X01 Eagle AXS (electronic)') {
                new_cassette_choices = [
                    { value: '10-12-14-16-18-21-24-28-32-36-42-50', text: '10T-50T - 12 speeds' },
                    { value: '10-12-14-16-18-21-24-28-32-36-42-52', text: '10T-52T - 12 speeds' },
                ];
            } else if (select_groupset_model === 'Advent') {
                new_cassette_choices = [
                    { value: '11-13-15-18-21-24-28-32-38', text: '11T-38T - 9 speeds' },
                    { value: '11-13-15-18-21-24-28-34-42', text: '11T-42T - 9 speeds' },
                    { value: '11-13-15-18-21-24-30-37-46', text: '11T-46T - 9 speeds' },
                ];
            } else if (select_groupset_model === 'Acolyte') {
                new_cassette_choices = [
                    { value: '11-13-15-18-21-24-30-38', text: '11T-38T - 8 speeds' },
                    { value: '12-15-18-21-24-28-34-42', text: '12T-42T - 8 speeds' },
                    { value: '12-15-18-21-24-30-37-46', text: '12T-46T - 8 speeds' },
                ];
            } else if (select_groupset_model === 'Advent X') {
                new_cassette_choices = [
                    { value: '11-13-15-18-21-24-28-34-40-48', text: '11T-48T - 10 speeds' },
                ];
            }

            // Clear existing options and add new options
            cassete_teeth.empty();
            jQuery.each(new_cassette_choices, function (index, item) {
                cassete_teeth.append(jQuery('<option>', {
                    value: item.value,
                    text: item.text
                }));
            });
        }
        //Con esto fai que cando se carga a páxina por primeira vez, mostre xa ben os valores do "Teeth of your chainring" dependendo do modelo que está seleccionado.
        update_cassette_choices()

        //Esto é para que cando exista un cambio do groupset_model_form ou no groupset_brand_form, o formulario do chairing se actualice.
        jQuery('#id_groupset_brand_form').change(update_cassette_choices);
        // Attach the update function to the change event of the wattios dropdown
        jQuery('#id_groupset_model_form').change(update_cassette_choices);
    });
</script>


<!--Mostrar o correspondente dropdown para o chainring e o cassette dependendo do gruposet que se seleccione-->
<script>
    jQuery(document).ready(function(){
        update_chainring_dropdown();
        jQuery ('#id_teeth_chainring_form').on ('change', function(){
            update_chainring_dropdown();
        });
        function update_chainring_dropdown () {
        var selected_chainring = jQuery('#id_teeth_chainring_form').val();
        // Opción de biplato
        if (selected_chainring === '36T/22T' || selected_chainring === '36T/26T' || selected_chainring === '38T/28T' || selected_chainring === '43T/30T' || selected_chainring === '45T/29T' ||
            selected_chainring === '46T/30T' || selected_chainring === '46T/32T' || selected_chainring === '46T/33T' || selected_chainring === '46T/34T' || selected_chainring === '46T/36T' ||
            selected_chainring === '48T/31T' || selected_chainring === '48T/32T' || selected_chainring === '48T/34T' || selected_chainring === '48T/35T' || selected_chainring === '50T/34T' ||
            selected_chainring === '50T/37T' || selected_chainring === '52T/36T' || selected_chainring === '52T/39T' || selected_chainring === '53T/39T' || selected_chainring === '54T/40T' ||
            selected_chainring === '54T/41T' || selected_chainring === '56T/43T' ){
            jQuery("#1_design_chainring").hide();
            jQuery("#2_design_chainring").show();
            jQuery("#3_design_chainring").hide();
        }
        // Opción de triple plato
        else if (selected_chainring === '40/30/22T' || selected_chainring === '44/32/22T' || selected_chainring === '59/39/30T'){
            jQuery("#1_design_chainring").hide();
            jQuery("#2_design_chainring").hide();
            jQuery("#3_design_chainring").show();
        } 
        // Opción monoplato
        else {
            jQuery("#1_design_chainring").show();
            jQuery("#2_design_chainring").hide();
            jQuery("#3_design_chainring").hide();
        }
    }});
</script>

<!--ESTO CREO QUE SE VAIA A PODER ELIMINAR-->
<!--This script is to show the corresponding dropdown depending on the customer choice (1 chain ring or 2 chain rings)-->
<!--<script>
    jQuery(document).ready(function () {
        var chainringDropdownState = sessionStorage.getItem('chainringDropdownState');

        var showDropdown1 = chainringDropdownState === '1';
        var showDropdown2 = chainringDropdownState === '2';
        var showDropdown2 = chainringDropdownState === '3';

    
        jQuery("#1_chainring_button").click(function (event) {
            event.preventDefault();  // Con esto o formulario non se submite cando clico nalgún dos botóns do chainring para mostrar o dropdown correspondente
            jQuery("#id_teeth_1chainring_form").show();
            jQuery("#1_design_chainring").show();
            jQuery("#id_teeth_2chainring_form").hide();
            jQuery("#2_design_chainring").hide();
            jQuery("#id_teeth_3chainring_form").hide();
            jQuery("#3_design_chainring").hide();
            sessionStorage.setItem('chainringDropdownState', '1'); //Con esto gardo o elemento na sesión para cando se me cargue a páxina sepa cal ten que aplicar. Ou dropdown 1 ou o 2
        });

        jQuery("#2_chainring_button").click(function (event) {
            event.preventDefault();  // Con esto o formulario non se submite cando clico nalgún dos botóns do chainring para mostrar o dropdown correspondente
            jQuery("#id_teeth_1chainring_form").hide();
            jQuery("#1_design_chainring").hide();
            jQuery("#id_teeth_2chainring_form").show();
            jQuery("#2_design_chainring").show();
            jQuery("#id_teeth_3chainring_form").hide();
            jQuery("#3_design_chainring").hide();
            sessionStorage.setItem('chainringDropdownState', '2'); //Con esto gardo o elemento na sesión para cando se me cargue a páxina sepa cal ten que aplicar. Ou dropdown 1 ou o 2
        });

        jQuery("#3_chainring_button").click(function (event) {
            event.preventDefault();  // Con esto o formulario non se submite cando clico nalgún dos botóns do chainring para mostrar o dropdown correspondente
            jQuery("#id_teeth_1chainring_form").hide();
            jQuery("#1_design_chainring").hide();
            jQuery("#id_teeth_2chainring_form").hide();
            jQuery("#2_design_chainring").hide();
            jQuery("#id_teeth_3chainring_form").show();
            jQuery("#3_design_chainring").show();
            sessionStorage.setItem('chainringDropdownState', '3'); //Con esto gardo o elemento na sesión para cando se me cargue a páxina sepa cal ten que aplicar. Ou dropdown 1 ou o 2
        });
        // Set initial visibility based on sessionStorage
        jQuery("#id_teeth_1chainring_form").toggle(showDropdown1);
        jQuery("#id_teeth_2chainring_form").toggle(showDropdown2);
        jQuery("#id_teeth_3chainring_form").toggle(showDropdown3);
    });
</script>-->

{% endblock content %}

  