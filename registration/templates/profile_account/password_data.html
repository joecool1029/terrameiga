{% extends 'base/base_registered.html' %}
<!--To load the Django library to translate your text.-->
{% load i18n %}

{% load static %}

{% block content %}

<section class="py-5 my-5">
	<div class="container">
		<div class="bg-white shadow rounded-lg d-block d-sm-flex">
			<div class="profile-tab-nav border-right" id="navigation_personal_area_section">
				<div class="p-4">
					<h4 class="text-center">{{request.user.email}}</h4>
				</div>
                <!--The tab -->
				<ul class="nav nav-pills">
					<li class="nav-item">
					  <a class="nav-link" href="{% url 'personal_data' %}">Personal Data</a>
					</li>
					<li class="nav-item">
					  <a class="nav-link active" href="{% url 'password' %}">Password</a>
					</li>
					<li class="nav-item">
					  <a class="nav-link" href="{% url 'delete_account' %}">Delete Account</a>
					</li>
				  </ul>
                  <!--End tab -->
                </div>
			</div>
            <div id="personal_data_section" class="tab-content p-4 p-md-5" id="v-pills-tabContent">
                <div class="tab-pane fade show active" id="access_data" role="tabpanel" aria-labelledby="account-tab">
                    <h3 class="mb-4"><strong>Password</strong></h3>
                    <form class="mx-1 mx-md-4" method="POST" action="" novalidate>
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="text-left mb-3">{% trans "Email:" %} <strong>{{request.user.email}}</strong></label>
                                </div>
                            </div>
                            {% for field in password_update_form.visible_fields %}
                                {% if forloop.counter == 1 %}
                                <label>Current Password</label>
                                {% elif forloop.counter == 2 %}
                                <label>New Password</label>
                                {% elif forloop.counter == 3 %}
                                <label>Repeat New Password</label>
                                {% endif %}
                                <div class="col-md-6 mb-3">
                                    {{ field }}
                                    <!--Co "if messages" solo imprimo os erros se hai alerta,se non hai non imprimo o erro-->
                                    {% if messages %}
                                    <label style="color: red;">{{ field.errors }}</label>
                                    {% endif %}
                                </div>
                            {% endfor %}
            
                            <div class="d-flex justify-content-left mb-lg-4">
                                <button id="update_password_button" type="submit" class="btn btn-success btn-lg" id="deliveryNextBtn">Update</button>
                            </div>
                        </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock content %}